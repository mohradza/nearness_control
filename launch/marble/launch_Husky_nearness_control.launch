<launch>

  <arg name="enable_tower_safety"         value="false"/>
  <arg name="enable_terrain_control"      value="false"/>

  <include file="$(find nearness_control)/launch/marble/nearness_control.launch">

    <arg name="enable_debug"                value="true"/>
    <arg name="is_ground_vehicle"           value="true"/>
<<<<<<< HEAD
    <arg name="enable_wf_control"           value="false"/>
    <arg name="enable_sf_control"           value="false"/>
    <arg name="enable_terrain_control"      value="true"/>
    <arg name="enable_attractor_control"    value="false"/>
=======
    <arg name="enable_wf_control"           value="true"/>
    <arg name="enable_sf_control"           value="true"/>
    <arg name="enable_terrain_control"      default="false"/>
    <arg name="enable_attractor_control"    value="true"/>
>>>>>>> e99089fd174f47e505a4fae33aa4d9cfd817976b
    <arg name="enable_command_weighting"    value="false"/>
    <arg name="enable_sf_clustering"        value="true"/>
    <arg name="enable_att_speed_reg"        value="false"/>
    <arg name="stagger_waypoints"           value="false"/>
    <arg name="enable_tower_safety"         default="false"/>

    <arg name="reverse_yaw_rate_cmd"        value="true"/>
    <arg name="reverse_wf_yaw_rate_cmd"     value="false"/>

    <!-- Horizontal Scanner Sensor Parameters -->
    <!-- These values correspond with the RPLidar S1 -->
    <arg name="total_horiz_scan_points"     value="720"/>
    <arg name="num_horiz_scan_points"       value="360"/>
    <arg name="horiz_scan_start_index"      value="180"/>
    <arg name="horiz_scan_limit"            value="1.5707"/>
    <arg name="horiz_sensor_min_distance"   value="0.1"/>
    <arg name="horiz_sensor_max_distance"   value="40.0"/>
    <arg name="horiz_sensor_min_noise"      value="0.15"/>
    <arg name="reverse_horiz_scan"          value="true"/>
    <arg name="num_horiz_fourier_terms"     value="5"/>

    <!-- Safety Parameters -->
    <arg name="enable_safety_boundary"      value="true"/>
    <arg name="enable_safety_box"           value="true"/>
    <arg name="front_safety_distance"       value="0.2"/>
    <arg name="side_safety_distance"        value="0.35"/>
    <arg name="close_side_speed"            value="0.1"/>

  </include>

  <node pkg="dynamic_reconfigure" name="nearness_controller_parameter_config" type="dynparam" args="load nearness_control_node $(find nearness_control)/cfg/Husky_params.yaml"/>

  <node pkg="topic_tools" name="cmd_vel_relay" type="relay" args="nearness_controller/control_commands nav_vel" />

  <include file="$(find safety_from_depth_image)/launch/Husky_safety_tower_camera_fwd_depth_pcl.launch" if="$(arg enable_tower_safety)"/>

  <include file="$find pcl_ros)/launch/launch_Husky_realsense_norma.launch" if="$(arg enable_terrain_control)"/>

</launch>
