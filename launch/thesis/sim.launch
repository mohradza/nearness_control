<launch>

  <arg name="enable_debug"                 default="true"/>
  <arg name="enable_altitude_hold"         default="false"/>
  <arg name="enable_speed_regulation"      default="false"/>

  <arg name="enable_teleop"                default = "0"/>
  <!-- <arg name=""             deault = ""/> -->


  <group ns="OHRAD_X3">
    <!-- Launch the config file, which contains controller gains and other relevant parameters -->
    <rosparam file="$(find nearness_control)/cfg/NearnessControl3D.yaml" command="load" ns="nearness_control_3d_node"/>
    
    <node pkg="nearness_control" type="nearness_control_3d_node" name="nearness_control_3d_node" output="screen">

        <!-- SUBSCRIBED TOPICS -->
        <remap from="nearness_control_3d/points"   to="ouster_points"/>
        <remap from="nearness_control_3d/odometry" to="odometry/ground_truth"/>
        <remap from="nearness_control_3d/control_commands" to="nav_vel"/>
        <remap from="nearness_control_3d/joy" to="joy"/>

        <!-- Enable switches -->
        <param name="enable_debug"             type="bool"       value="$(arg enable_debug)"/>
        <param name="enable_altitude_hold"     type="bool"       value="$(arg enable_altitude_hold)"/>
        <param name="enable_speed_regulation"  type="bool"       value="$(arg enable_speed_regulation)"/>

    </node>

    <include file="$(find nearness_control)/launch/sim/tf2odom.launch"/>

    <include file="$(find nearness_control)/launch/sim/sim_teleop.launch" if="$(arg enable_teleop)"/>

  </group>

  <include file="$(find nearness_control)/launch/sim/twist_mux.launch"/>


</launch>
